<!DOCTYPE html>
<html>
<head>
	<title>WebSocket Test</title>
	<script type='text/javascript' src='js/listeners/init.js' /></script>
	<style>
		pre#timer {
			border: 1px solid black;
		}
	</style>
</head>
<body>
	<div style="border: solid 1px #aaa;">
		<p>Initialization:</p>
		<input type='text' id='input_name' />
		<button type="button" onclick="entry()">Entry</button>
		<button type="button" onclick="retire()">Retire</button>
	</div>
	<div style="border: solid 1px #aaa;">
		<p>:</p>
		<input type='text' id='input_name' />
		<button type="button" onclick="show()">Show</button>
	</div>
</body>
<script type='text/javascript'>
var obj = initWs(getBaseURL());

function entry() {
	obj.socket.send(JSON.stringify({
			class: 'entry',
			type: '1',
			name: document.getElementById('input_name').value
		}));
}
function retire() {
	obj.socket.send(JSON.stringify({
			class: 'retire'
		}));
}
function show() {
	obj.socket.send(JSON.stringify({
		class: 'show'
	}));
}
function getBaseURL() {
	var href = window.location.href.substring(7); // strip "http://"
	var idx = href.indexOf("/");
	return "ws://" + href.substring(0, idx);
}
</script>
</html>
